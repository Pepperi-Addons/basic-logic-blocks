<ng-container #logicBlockHeader></ng-container>

<div class="configuration-content">
  <div>
    <div class="single-element-row">
      <pep-select
        [label]="'EXTRACT_VALUE.SELECT_OBJECT' | translate"
        [options]="objectFlowParamsOptions"
        [emptyOption]="false"
        [value]="currentConfiguration.Object.Value"
        [mandatory]="true"
        (valueChange)="valueChange($event)"
      ></pep-select>
    </div>

    <div class="flex-row">
      <ng-container
        *ngTemplateOutlet="
          chooseByParamSourceTemplate;
          context: {
            title: ('EXTRACT_VALUE.PATH' | translate),
            configurationProperty: currentConfiguration.SourcePathState
          }
        "
      >
      </ng-container>
    </div>

    <div class="single-element-row">
      <pep-select
        [label]="'EXTRACT_VALUE.SAVE' | translate"
        [options]="allFlowParamsOptions"
        [emptyOption]="false"
        [value]="currentConfiguration?.SaveSourceOn?.Value"
        [mandatory]="true"
        (valueChange)="valueChange($event)"
      ></pep-select>
    </div>
  </div>

  <ng-template
    #chooseByParamSourceTemplate
    let-title="title"
    let-mandatory="mandatory"
    let-configurationProperty="configurationProperty"
  >
    <div class="flex-row">
      <pep-select
        [disabled]="!currentConfiguration?.Object?.FlowParamSource"
        [label]="title"
        [options]="parameterTypeOptions"
        [emptyOption]="false"
        [value]="configurationProperty?.SourcePathState?.Value"
        [mandatory]="mandatory"
        (valueChange)="onFlowParamSourceChange($event, configurationProperty)"
      ></pep-select>

      <!-- For static -->
      <pep-textbox
        [disabled]="!currentConfiguration?.Object?.FlowParamSource"
        *ngIf="configurationProperty?.FlowParamSource === 'Static'"
        [value]="configurationProperty?.Value"
        (valueChange)="onPropertyValueChange($event, configurationProperty)"
      ></pep-textbox>

      <!-- For dynamic - show flow params -->
      <pep-select
        [disabled]="!currentConfiguration?.Object?.FlowParamSource"
        *ngIf="configurationProperty?.FlowParamSource === 'Dynamic'"
        [options]="allFlowParamsOptions"
        [emptyOption]="false"
        [value]="configurationProperty?.Value"
        (valueChange)="onPropertyValueChange($event, configurationProperty)"
      ></pep-select>
    </div>
  </ng-template>
</div>
